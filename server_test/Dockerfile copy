#   https://hub.docker.com/_/nginx
FROM nginx:1.20.1-alpine

#  default conf for proxy service
COPY ./nginx/default.conf /etc/nginx/conf.d/default.conf

# Delete the default welcome
RUN rm /usr/share/nginx/html/*

# NOT FOUND response
COPY ./nginx/backend-not-found.html /usr/share/nginx/html/backend-not-found.html

# Proxy configurations
COPY ./nginx/includes/ /etc/nginx/includes/

# Site static files
COPY ./build /usr/share/nginx/html

# EXPOSE 80

#CMD ["nginx"]
CMD ["nginx", "-g", "daemon off;"]